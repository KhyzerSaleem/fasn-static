(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3514],{92805:function(t,e,r){Promise.resolve().then(r.bind(r,97867)),Promise.resolve().then(r.bind(r,31085)),Promise.resolve().then(r.t.bind(r,72972,23)),Promise.resolve().then(r.bind(r,53927))},79205:function(t,e,r){"use strict";r.d(e,{Z:function(){return u}});var n=r(2265);let a=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.filter((t,e,r)=>!!t&&""!==t.trim()&&r.indexOf(t)===e).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)((t,e)=>{let{color:r="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:u,className:c="",children:d,iconNode:l,...f}=t;return(0,n.createElement)("svg",{ref:e,...i,width:a,height:a,stroke:r,strokeWidth:u?24*Number(o)/Number(a):o,className:s("lucide",c),...f},[...l.map(t=>{let[e,r]=t;return(0,n.createElement)(e,r)}),...Array.isArray(d)?d:[d]])}),u=(t,e)=>{let r=(0,n.forwardRef)((r,i)=>{let{className:u,...c}=r;return(0,n.createElement)(o,{ref:i,iconNode:e,className:s("lucide-".concat(a(t)),u),...c})});return r.displayName="".concat(t),r}},27648:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return a.a}});var n=r(72972),a=r.n(n),s={};for(var i in n)"default"!==i&&(s[i]=(function(t){return n[t]}).bind(0,i));r.d(e,s)},99376:function(t,e,r){"use strict";r.r(e);var n=r(35475),a={};for(var s in n)"default"!==s&&(a[s]=(function(t){return n[t]}).bind(0,s));r.d(e,a)},23442:function(t,e,r){"use strict";let n=r(2265).createContext(void 0);e.IntlContext=n},76357:function(t,e,r){"use strict";var n=r(2265),a=r(23442);function s(){let t=n.useContext(a.IntlContext);if(!t)throw Error(void 0);return t}e.useIntlContext=s,e.useLocale=function(){return s().locale}},526:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(76357);r(2265),r(23442),e.useLocale=n.useLocale},53927:function(t,e,r){"use strict";var n=r(57437),a=r(2265),s=r(23340),i=r(15246),o=r(29827),u=r(16593),c=r(21770),d=r(51817),l=r(32852),f=r(49089);e.default=t=>{var e,r;let{productId:v}=t,{toast:m}=(0,s.pm)(),p=(0,o.NL)(),{data:h}=(0,u.a)({queryKey:["wishlist"],queryFn:l.B,staleTime:1/0}),b=null==h?void 0:null===(r=h.data)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.some(t=>t.id===v),[S,T]=(0,a.useState)(b||!1);(0,a.useEffect)(()=>{T(b||!1)},[b,h]);let{mutate:E,isPending:A}=(0,c.D)({mutationFn:async()=>await (0,i.z)(v),onMutate:()=>{T(t=>!t),p.setQueryData(["wishlist"],t=>{if(!t)return t;let e=S?t.data.data.filter(t=>t.id!==v):[...t.data.data,{id:v}];return{...t,data:{...t.data,data:e}}})},onSuccess:t=>{200===t.status?m({title:t.message,description:"✅",variant:"default",duration:3e3}):401===t.status?(m({title:t.message,variant:"destructive",duration:3e3}),T(t=>!t)):(m({title:"خطأ غير متوقع",description:"حدث خطأ أثناء تحديث قائمة المفضلة.",variant:"destructive",duration:3e3}),T(t=>!t))},onError:t=>{m({title:"خطأ في الشبكة",description:"يرجى التحقق من الاتصال بالإنترنت والمحاولة مرة أخرى.",variant:"destructive",duration:3e3}),T(t=>!t)}});return(0,n.jsx)("button",{onClick:()=>!A&&E(),disabled:A,className:"relative flex items-center justify-center",children:A?(0,n.jsx)(d.Z,{className:"animate-spin text-gray-500",size:24}):(0,n.jsx)(f.$0H,{className:S?"text-red-500":"text-gray-400",size:24})})}},23340:function(t,e,r){"use strict";r.d(e,{Am:function(){return l},pm:function(){return f}});var n=r(2265);let a=0,s=new Map,i=t=>{if(s.has(t))return;let e=setTimeout(()=>{s.delete(t),d({type:"REMOVE_TOAST",toastId:t})},1e6);s.set(t,e)},o=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,1)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(t=>t.id===e.toast.id?{...t,...e.toast}:t)};case"DISMISS_TOAST":{let{toastId:r}=e;return r?i(r):t.toasts.forEach(t=>{i(t.id)}),{...t,toasts:t.toasts.map(t=>t.id===r||void 0===r?{...t,open:!1}:t)}}case"REMOVE_TOAST":if(void 0===e.toastId)return{...t,toasts:[]};return{...t,toasts:t.toasts.filter(t=>t.id!==e.toastId)}}},u=[],c={toasts:[]};function d(t){c=o(c,t),u.forEach(t=>{t(c)})}function l(t){let{...e}=t,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),n=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...e,id:r,open:!0,onOpenChange:t=>{t||n()}}}),{id:r,dismiss:n,update:t=>d({type:"UPDATE_TOAST",toast:{...t,id:r}})}}function f(){let[t,e]=n.useState(c);return n.useEffect(()=>(u.push(e),()=>{let t=u.indexOf(e);t>-1&&u.splice(t,1)}),[t]),{...t,toast:l,dismiss:t=>d({type:"DISMISS_TOAST",toastId:t})}}},15246:function(t,e,r){"use strict";r.d(e,{z:function(){return a}}),r(83079);var n=r(12119),a=(0,n.$)("c638a0882e98eccdf9bcb931b66b8b8bc699c7aa");(0,n.$)("147cedfe802c3b994695b15c830e3f07889c0fd6")},32852:function(t,e,r){"use strict";r.d(e,{B:function(){return n}}),r(83079);var n=(0,r(12119).$)("d64b3a0e72cbb0f90d71992799eda090fae598e7")}},function(t){t.O(0,[7699,2972,1262,2411,8825,2971,2117,1744],function(){return t(t.s=92805)}),_N_E=t.O()}]);